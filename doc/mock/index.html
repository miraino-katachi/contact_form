<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>お問い合わせ</title>
    <link rel="stylesheet" href="./css/normalize.css">
    <link rel="stylesheet" href="./css/main.css">
</head>

<body>
    <div class="container">
        <h1>お問い合わせ</h1>
        <p>
            お問い合わせは下記のフォームよりお願いいたします。<br>
            <span class="required">必須</span>マークは必須入力項目です。
        </p>
        
        <form method="post" action="./confirm.php">
            <input type="hidden" name="token" value="e473409d9e397fbc97f6f145b54bd61f108997ec6e4007982320a2fa24198114fae62a17db2f50e0cb9cdf5ad51c2b40da5c3100ac55d50e058da19b321270946ef51b6514aa84050a4149a9dceff0c2cc5c9be6c6e2394b16015200f775eb5f662146bf15456d0d4363048b587bfdf6473e599715bbf156030babbaa4200682e87cec3d1454fc5c5d89cb4e6e5576d2b9c007621e7e5f3119e57690cf4b0e33e04c0285ab1c2a865731425c00c01337ec437de877510d64b82519293b0b467bf0523fa6860cad81f5fe03dac6abafb250d75215e2047164d5d4bc059069a7a4fc3baf43e19507df80e342f04bed60b66a403e11d152b6f015759d11e00af898a02adf753f291504ab1d4b4f3c8e42272e7a38f8949b14bae04a3e9646c04ce3b846f1f1d807bd2ccf51e5b3578398b581060176350399dbe5aa16e0a735a103b92eab74eb0569704d7250a41d896759f02fa7e3fcc267936e32a8d4e9ec4f928df12b0666c660225e591ebf95e7db45a65f5eff3181babf86b87dbffb935d234e05794cc4d723b94d67dadfd23aeb3e1559a07b6e82145844cba86f94a447b3bacba2d4d1e144fb4b8c99e6490580dccbb33019e64f61ef0cfe692eff422e815cfc05345acfe18a246041e41c30f82918b35774df26b2b1fd6874722a0ebe4ff97e303e78e3d952b824d7e8af3e6f6dd773fb860955942c8df80af1a3ed3d9578fd5670f7812f46b5d1b8c89957424af7afd6e8863fe35109c0b4ad913280633dde4464b49f9a67cc272cade138a254a8eaa4be0a05d1577763449956aac28bf79a549e7ee26110bdcd1fd41f1daaa0fd3cf870b518b6d9622844654d4e056e8248530f5b362ebc81698faf61a3cc9193d6a69e22991212d148d4713adac75062c29fdacd4d1affe729ccf02a79237d5660f6d8ce29b1ef34b97d8e23fdb390178af1e8acd1eaadc3e2b7f02dadbc9d08293be463b1a8d55162517385f80e65f4980dd8d4afa1cbc3148c816c423f1831056ff655b36f827d706df83f3a41643dffd3ed98201ed2581290bcddb528ea43c712dff130671d683feb8912dd425185db3c2310078b4bb0ca535f6a78348233b5625dd16d51fe1fba5323b3cd8bd3decaeec59d37f48028d4493309020352fcf3e0d1a1181443354b44f05a2825855d7c606abd85014a9012b2b4b4fee541da3fe70d20e99afbc7f67202aaae208e8b5a6d55f38a3a2d2ff676ef2482de06e42f7fd6b8fe174f1257594b14f4448b95f0c601b8b90be5235f73ec01b5c18d37d2b21f69d240441249d64256d0730987d1310a855d9dfd941017ab71fbf12115d0f2b5e913e072a57acf3a88b65fe7f190b3c2b4bbc505d205bc4654849265110d898bd0dec36e8a998a578e7de585101dc040d8f5ee373462cb418e8f60af75190e120b30d49683628829fbd6bf060e1d4c49cb4546b5693d173a13a2969bad5c9297e9623ba1a77550a6bfc2437743f37a4c2455accb7b0970bbaaefca59ac7c3c1c0ef9af8d6b1c3ccb9c7d6833baa9f50208efeaebaf3bebdba41df091a72443ed00fecb521150d3bab3524562b9fca001bc2084832f0998ce68e9c3460e9330b96d7065710dabb6890eb5fafa701dd8ffb84d8aab05e60ef2be3bb29d1c3b4926e0a390fcdbe794a1f0878d5599a189a919e09bf72ea16391c46a6aeaf77ce873848d13b82a8a88637dfe7e4339669f1fe3f83db32017c9d4b5f401d8f05e5c8f356219fb6a0ea5ec20d444a364dbc151c5ccdf06ad8ef96e34518cb978ca54f2d84c079236abd59765dc792cb5e8fd04a1fd71b05c87dde1422de1d2c14743772c446212a409523cf8d31b5d5c379f219a6fdb86a584b6bb3c671631fc3fc85e2140540699fb0aef8bf2929700d16feac4d088537b08ddc19d929c5d77ec3536c446274c79ae8d15e6cdd32a544a7c817119fa7e5bf1c4ce3d5973ad8291e6ec67a161d9e01e4c567738aa17491dde2578c75a7cb1a8c3e73ca908fa6dadb325ef5c2cf6d0161a3d121ae6acedc1ba92d5a574b3ecf26ce2a9463e6cffbea3ea41ced74ca36a931831905881e6772912bcc7fe58239b686590d2b029e1b89697e21e6eb4d7295dbd652a82174020fea977d1013f4e015a9a377f3351428d3895edd8e5751ab6dca54b8fa9d2bc8d604769a3834bd00e86ff4fae613a189605b0ea5838ef49fe3395cb9f58c5e183d33ad47678eb94b46b1790149f154d33ce53a4949799885e4588f2fabdf386adb3fba86fbdf34e3ccbf0ea8f55fb90391945ba7ab49c5084cf69304f76351e0a0f6d8931b1857f76454dd8472a169bb6ed301772db28cc5369b690c00e7b276fddeec063149844090fd8866c81f6f8e8b5cfa5fd3a64fd85509284cf088d754e4e4715ab84977deaaea72c12d3551264430e5568c3fd1226ff7cb450e1ed26f933349ea90b11ee306eef8838cad3839a6e80c2ce0103504a223b38c6dded690ef12890a17d3526818746a4c11520b2fc13ee989768d1dd8e85b63a8e919054494117ca673363a306e42b7ee35241488cf2020aa2016458cf0cc29bc0b12b212ba60d81bc7d3864f258d84522abf3ddfa36fcadd350566be6799107680f78cc3d05eb231198a1f6d7ea4d4b320e6112cd764924fae7ac3f3b47f24e4a3c392b11d821fed547b2f98b1aced5f89638004f943d54b2d70cacfdd23c3a6848bc6befd9c3cdb7d69f8cdae8ea598a39dae82c43799c9a77974c5da161f1369ce97846fe80ee1ab69ae02b35645dd6477a044b1650f5fb38251c20d349ba91abdb8a28e6f04be5d03fc4953b7b40c4196de01781b3122dd41ba1074174e22622e02a4c128be261e70d30bd57c59db021b77b8797dda40fc2a9067b0805a2a628a1">
            <table>
                <tr>
                    <th><span class="input_name">お名前</span><span class="required input_required">必須</span></th>
                    <td>
                                                <input type="text" name="name" class="name" data-target="form" value="">
                        （50文字以内）
                    </td>
                </tr>
                <tr>
                    <th>
                        <span class="input_name">住所</span><span class="required input_required">必須</span>
                    </th>
                    <td>
                        郵便番号：（半角数字と半角ハイフンのみ）<br>
                                                <input type="text" class="postal" name="postal_code" id="postal_code" data-target="form" value="">
                        <button id="search" type="button">住所検索</button><br>
                        都道府県：
                                                <select name="pref" id="pref" data-target="form">
                            <option value="">--選択してください--</option>
                                                            <option value="北海道" >北海道</option>
                                                            <option value="青森県" >青森県</option>
                                                            <option value="岩手県" >岩手県</option>
                                                            <option value="宮城県" >宮城県</option>
                                                            <option value="秋田県" >秋田県</option>
                                                            <option value="山形県" >山形県</option>
                                                            <option value="福島県" >福島県</option>
                                                            <option value="茨城県" >茨城県</option>
                                                            <option value="栃木県" >栃木県</option>
                                                            <option value="群馬県" >群馬県</option>
                                                            <option value="埼玉県" >埼玉県</option>
                                                            <option value="千葉県" >千葉県</option>
                                                            <option value="東京都" >東京都</option>
                                                            <option value="神奈川県" >神奈川県</option>
                                                            <option value="新潟県" >新潟県</option>
                                                            <option value="富山県" >富山県</option>
                                                            <option value="石川県" >石川県</option>
                                                            <option value="福井県" >福井県</option>
                                                            <option value="山梨県" >山梨県</option>
                                                            <option value="長野県" >長野県</option>
                                                            <option value="岐阜県" >岐阜県</option>
                                                            <option value="静岡県" >静岡県</option>
                                                            <option value="愛知県" >愛知県</option>
                                                            <option value="三重県" >三重県</option>
                                                            <option value="滋賀県" >滋賀県</option>
                                                            <option value="京都府" >京都府</option>
                                                            <option value="大阪府" >大阪府</option>
                                                            <option value="兵庫県" >兵庫県</option>
                                                            <option value="奈良県" >奈良県</option>
                                                            <option value="和歌山県" >和歌山県</option>
                                                            <option value="鳥取県" >鳥取県</option>
                                                            <option value="島根県" >島根県</option>
                                                            <option value="岡山県" >岡山県</option>
                                                            <option value="広島県" >広島県</option>
                                                            <option value="山口県" >山口県</option>
                                                            <option value="徳島県" >徳島県</option>
                                                            <option value="香川県" >香川県</option>
                                                            <option value="愛媛県" >愛媛県</option>
                                                            <option value="高知県" >高知県</option>
                                                            <option value="福岡県" >福岡県</option>
                                                            <option value="佐賀県" >佐賀県</option>
                                                            <option value="長崎県" >長崎県</option>
                                                            <option value="熊本県" >熊本県</option>
                                                            <option value="大分県" >大分県</option>
                                                            <option value="宮崎県" >宮崎県</option>
                                                            <option value="鹿児島県" >鹿児島県</option>
                                                            <option value="沖縄県" >沖縄県</option>
                                                    </select><br>
                        市区町村：（50文字以内）<br>
                                                <input type="text" class="address" name="address1" id="address1" data-target="form" value="">
                        <br>
                        町名番地等：（50文字以内）<br>
                                                <input type="text" class="address" name="address2" id="address2" data-target="form" value="">
                    </td>
                </tr>
                <tr>
                    <th>
                        <span class="input_name">メールアドレス</span><span class="required input_required">必須</span>
                    </th>
                    <td>
                                                <input type="email" class="email" name="email" data-target="form" value="">
                    </td>
                </tr>
                <tr>
                    <th>
                        <span class="input_name">電話番号</span>
                    </th>
                    <td>
                                                <input type="tel" name="phone_number" data-target="form" value="">（半角数字と半角ハイフンのみ）
                    </td>
                </tr>
                <tr>
                    <th>
                        <span class="input_name">お問い合わせ内容</span>
                    </th>
                    <td>
                                                <textarea name="contact" data-target="form"></textarea><br>
                        （1,000文字以内）
                    </td>
                </tr>
            </table>
            <input type="submit" value="確認">
            <button type="button" id="reset">リセット</button>
        </form>
    </div>
    <script src="./js/jquery-3.4.1.min.js"></script>
    <script>
        // 郵便番号→住所検索
        $('#search').click(function() {
            var postal = $('#postal_code').val();
            $.ajax({
                type: "GET",
                url: "./postal_code.php",
                data: {
                    postal_code: postal
                },
                success: function(data) {
                    if (data['msg']) {
                        // エラーメッセージがあるとき→住所検索失敗
                        $('#pref').val('');
                        $('#address1').val('');
                        $('#address2').val('');
                        $('#posttal_err').text(data['msg']);
                    } else {
                        // エラーメッセージがないとき→住所検索成功
                        $('#pref').val(data.prefecture);
                        $('#address1').val(data.address1);
                        $('#address2').val(data.address2);
                        $('#posttal_err').text('');
                    }
                }
            });
        });

        // 入力内容のリセット
        $('#reset').click(function() {
            // .worningのクラス名がついた要素のテキストを空にする。
            $('.warning').text('');
            // data-target="form"の入力項目の内容を空にする。
            $('[data-target="form"]').val('');
        });
    </script>
</body>

</html>